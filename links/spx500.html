<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SPX 500</title>

<script src="/shares/js/jquery-3.1.1.min.js"></script>
<script src="/shares/js/highstock.js"></script>
<script src="/shares/js/exporting.js"></script>
<!-- <script src="https://code.highcharts.com.cn/highcharts-plugins/highcharts-zh_CN.js"></script> -->

<style type="text/css">
#container {
margin-top: 5vh;
margin-bottom: 10vh;
max-height: 800px;
height: 85vh;
}
#container2 {
margin-bottom: 30vh;
max-height: 800px;
height: 80vh;
}

/* Conflict with Bootstrap, not needed after v7.0.1 */
.highcharts-bindings-wrapper * {
box-sizing: content-box;
}
</style>
</head>
<body>
<link rel="stylesheet" type="text/css" href="/shares/css/gui.css">
<link rel="stylesheet" type="text/css" href="/shares/css/popup.css">


<script src="/shares/js/highstock.js"></script>
<script src="/shares/js/data.js"></script>

<script src="/shares/js/indicators-all.js"></script>
<script src="/shares/js/drag-panes.js"></script>

<script src="/shares/js/annotations-advanced.js"></script>
<script src="/shares/js/price-indicator.js"></script>
<script src="/shares/js/full-screen.js"></script>

<script src="/shares/js/stock-tools.js"></script>


<script src="/shares/js/exporting.js"></script>
<script src="/shares/js/export-data.js"></script>

<body>

<h2 style="text-align: center;">SPX 500</h2>

<!-- <section>
    <div id="container2" style="min-width:400px;height:400px"></div>
</section> -->

<section>
    <div id="container" class="chart"></div>
</section>


<h2 style="text-align: center;">TSLA</h2>

<section>
    <div id="TSLA_container" class="chart" style="height:800px"></div>
</section>
<!-- 
<section>
    <div id="container2" style="min-width:400px;height:400px"></div>
</section> -->




<script type="text/javascript">
Highcharts.getJSON('/shares/SPX2022.json', function (data) {

// split the data set into ohlc and volume
var ohlc = [],
volume = [],
dataLength = data.length,
i = 0;

for (i; i < dataLength; i += 1) {
ohlc.push([
    data[i][0], // the date
    data[i][1], // open
    data[i][2], // high
    data[i][3], // low
    data[i][4] // close
]);

volume.push([
    data[i][0], // the date
    data[i][5] // the volume
]);
}

Highcharts.setOptions({

    global: {

    timezoneOffset: -8 * 60

    }

});


Highcharts.stockChart('container', {
yAxis: [{
    labels: {
        align: 'left'
    },
    height: '80%',
    resize: {
        enabled: true
    }
}, {
    labels: {
        align: 'left'
    },
    top: '80%',
    height: '20%',
    offset: 0
}],
tooltip: {
    shape: 'square',
    headerShape: 'callout',
    borderWidth: 0,
    shadow: false,
    positioner: function (width, height, point) {
        var chart = this.chart,
            position;

        if (point.isHeader) {
            position = {
                x: Math.max(
                    // Left side limit
                    chart.plotLeft,
                    Math.min(
                        point.plotX + chart.plotLeft - width / 2,
                        // Right side limit
                        chart.chartWidth - width - chart.marginRight
                    )
                ),
                y: point.plotY
            };
        } else {
            position = {
                x: point.series.chart.plotLeft,
                y: point.series.yAxis.top - chart.plotTop
            };
        }

        return position;
    }
},
    series: [{
        type: 'ohlc',
        id: 'aapl-ohlc',
        name: 'SPX500',
        data: ohlc,
        color: 'green',
        upColor: 'red'
    }, {
        type: 'column',
        id: 'aapl-volume',
        name: 'SPX500 section',
        data: volume,
        yAxis: 1
    }],
    responsive: {
        rules: [{
            condition: {
                maxWidth: 800
            },
            chartOptions: {
                rangeSelector: {
                    inputEnabled: false
                }
            }
        }]
    }
    });
});


/**TSLA **/

Highcharts.getJSON('/shares/TSLA2022.json', function (data) {

// split the data set into ohlc and volume
var ohlc = [],
volume = [],
dataLength = data.length,
i = 0;

for (i; i < dataLength; i += 1) {
ohlc.push([
    data[i][0], // the date
    data[i][1], // open
    data[i][2], // high
    data[i][3], // low
    data[i][4] // close
]);

volume.push([
    data[i][0], // the date
    data[i][5] // the volume
]);
}

Highcharts.setOptions({

    global: {

    timezoneOffset: -8 * 60

    }

});


Highcharts.stockChart('TSLA_container', {
yAxis: [{
    labels: {
        align: 'left'
    },
    height: '80%',
    resize: {
        enabled: true
    }
}, {
    labels: {
        align: 'left'
    },
    top: '80%',
    height: '20%',
    offset: 0
}],
tooltip: {
    shape: 'square',
    headerShape: 'callout',
    borderWidth: 0,
    shadow: false,
    positioner: function (width, height, point) {
        var chart = this.chart,
            position;

        if (point.isHeader) {
            position = {
                x: Math.max(
                    // Left side limit
                    chart.plotLeft,
                    Math.min(
                        point.plotX + chart.plotLeft - width / 2,
                        // Right side limit
                        chart.chartWidth - width - chart.marginRight
                    )
                ),
                y: point.plotY
            };
        } else {
            position = {
                x: point.series.chart.plotLeft,
                y: point.series.yAxis.top - chart.plotTop
            };
        }

        return position;
    }
},
    series: [{
        type: 'ohlc',
        id: 'aapl-ohlc',
        name: 'TSLA',
        data: ohlc,
        color: 'green',
        upColor: 'red'
    }, {
        type: 'column',
        id: 'aapl-volume',
        name: 'TSLA section',
        data: volume,
        yAxis: 1
    }],
    responsive: {
        rules: [{
            condition: {
                maxWidth: 800
            },
            chartOptions: {
                rangeSelector: {
                    inputEnabled: false
                }
            }
        }]
    }
    });
});

</script>
</body>
</html>
